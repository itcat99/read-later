{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/background/index.js","webpack:///./src/chromeApi/bookmark.js","webpack:///./src/chromeApi/index.js"],"names":["OTHER_BOOKMARK_FOLDER_ID","DEFALUT_CONFIG","folder","ReadLater","config","posts","Object","assign","bookmarkApi","search","result","folderArr","forEach","item","parentId","push","length","targetId","id","shift","getChildren","children","child","move","remove","_getInfo","console","log","create","title","chrome","runtime","onMessage","addListener","msg","update","bookmarks","onCreated","bookmark","info","_update","onMoved","onRemoved","removeInfo","onChanged","get","bookmarkInfo","onImportEnded","sendMessage","num","browserAction","setBadgeText","text","setBadgeBackgroundColor","color","_getPosts","_setBadgeNum","_hasFolder","_createFolder","_listener","onInstalled","app","run","then","catch","err","error","generator","type","args","Promise","resolve","reject","query","ids","getTree","from","to","changes","removeTree"],"mappings":"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","file":"background.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"background\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"./src/background/index.js\",\"vendor\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","/* eslint no-console:0 */\n\nimport { bookmarkApi } from '../chromeApi';\n\nconst OTHER_BOOKMARK_FOLDER_ID = '2';\nconst DEFALUT_CONFIG = {\n  folder: '__read_later__',\n};\n\nclass ReadLater {\n  constructor(config) {\n    this.posts = [];\n    this.config = Object.assign({}, DEFALUT_CONFIG, config);\n  }\n\n  async _getInfo(folder) {\n    const result = await bookmarkApi.search(folder);\n    const folderArr = [];\n\n    result.forEach(item => {\n      const { parentId } = item;\n\n      if (parentId === OTHER_BOOKMARK_FOLDER_ID) {\n        folderArr.push(item);\n      }\n    });\n\n    if (folderArr.length === 1) {\n      return folderArr[0];\n    } else {\n      const targetId = folderArr[0].id;\n      folderArr.shift();\n\n      folderArr.forEach(async item => {\n        const { id } = item;\n        const children = await bookmarkApi.getChildren(id);\n        children.forEach(async child => {\n          await bookmarkApi.move(child.id, {\n            parentId: targetId,\n          });\n        });\n\n        await bookmarkApi.remove(id);\n      });\n\n      return this._getInfo(targetId);\n    }\n  }\n\n  async _hasFolder(folder) {\n    const result = await bookmarkApi.search(folder);\n    console.log('has folder result: ', result);\n\n    return result.length > 0;\n  }\n  _createFolder(folder) {\n    return bookmarkApi.create({\n      parentId: OTHER_BOOKMARK_FOLDER_ID,\n      title: folder,\n    });\n  }\n\n  _getPosts(id) {\n    return bookmarkApi.getChildren(id);\n  }\n\n  _listener() {\n    chrome.runtime.onMessage.addListener(msg => {\n      this.update(msg);\n    });\n\n    /* Following is about bookmark's events */\n    chrome.bookmarks.onCreated.addListener(async (id, bookmark) => {\n      if (bookmark.parentId === this.info.id) {\n        await this._update();\n      }\n    });\n    chrome.bookmarks.onMoved.addListener(async () => {\n      await this._update();\n    });\n    chrome.bookmarks.onRemoved.addListener(async (id, removeInfo) => {\n      if (removeInfo.parentId === this.info.id) {\n        await this._update();\n      }\n    });\n    chrome.bookmarks.onChanged.addListener(async id => {\n      const bookmarkInfo = await bookmarkApi.get(id);\n      if (bookmarkInfo.parentId === this.info.id) {\n        await this._update();\n      }\n    });\n    chrome.bookmarks.onImportEnded.addListener(async () => {\n      await this._update();\n    });\n  }\n\n  _sendMsg(msg) {\n    chrome.runtime.sendMessage(msg);\n  }\n\n  _setBadgeNum(num = 0) {\n    if (num > 99) {\n      num = '99+';\n    }\n\n    chrome.browserAction.setBadgeText({\n      text: num + '',\n    });\n  }\n\n  _setBadgeColor() {\n    chrome.browserAction.setBadgeBackgroundColor({\n      color: '#4779ED',\n    });\n  }\n\n  async _update() {\n    this.posts = await this._getPosts(this.info.id);\n    this._setBadgeNum(this.posts.length);\n  }\n\n  async run() {\n    const { folder } = this.config;\n\n    if (!(await this._hasFolder(folder))) {\n      await this._createFolder(folder);\n    }\n\n    this.info = await this._getInfo(folder);\n    await this._update();\n    this._setBadgeNum();\n\n    this._listener();\n  }\n}\n\nchrome.runtime.onInstalled.addListener(() => {\n  const app = new ReadLater();\n\n  app\n    .run()\n    .then(() => {\n      console.log('> app is running...');\n    })\n    .catch(err => {\n      console.error('> app start has Err: ', err);\n    });\n});\n","function generator(type, ...args) {\n  return new Promise((resolve, reject) => {\n    try {\n      chrome.bookmarks[type](...args, result => {\n        resolve(result);\n      });\n    } catch (error) {\n      reject(`> bookmarks [${type}] Err: ${error}`);\n    }\n  });\n}\n\n/**\n * 搜索书签树节点，找出匹配的结果。如果以对象方式指定查询，得到的 BookmarkTreeNodes 匹配所有指定的属性。\n * @param {string | object} query - 可以指定字符串，包含单词和加上引号的短语，用于匹配书签 URL 和标题。也可以指定对象，其中可以指定 query、url 和 title 属性，返回匹配所有指定属性的书签。\n */\nexport const search = query => generator('search', query);\n\n/**\n * 获得指定的书签树节点。\n * @param {string | string[]} ids - 一个字符串或多个字符串组成的数组，指定节点的标识符。\n */\nexport const get = ids => generator('get', ids);\n\n/**\n * 获取指定书签树节点的所有子节点\n *\n * @param {string} id - 指定书签节点的id\n */\nexport const getChildren = id => generator('getChildren', id);\n\n/**\n * 获取整个书签树\n */\nexport const getTree = () => generator('getTree');\n\n/**\n * 在指定的上一级文件夹下创建新的书签或文件夹。如果 url 为 null 或者省略，则创建文件夹。\n * @param {object} bookmark\n * @param {string} bookmark.parentId 默认为‘其他书签’ 指定的根目录\n * @param {number} bookmark.index\n * @param {string} bookmark.title\n * @param {string} bookmark.url\n */\nexport const create = bookmark => generator('create', bookmark);\n\n/**\n * 将指定的书签树节点移到指定位置\n * @param {string} from 指定书签的id\n * @param {Object} to 目的地\n * @param {string} to.parentId 目标文件夹id\n * @param {number} to.index\n */\nexport const move = (from, to) => generator('move', from, to);\n\n/**\n * 更新书签或文件夹的属性。只需要指定您需要更改的属性，未指定的属性不会更改。注意：目前只支持“title”和“url”属性。\n * @param {string} id 要更新的书签或文件夹id\n * @param {object} changes 要更新的内容\n * @param {string} changes.title\n * @param {string} changes.url\n */\nexport const update = (id, changes) => generator('update', id, changes);\n\n/**\n * 删除书签或者空文件夹。\n * @param {string} id 要删除的书签或文件夹id\n */\nexport const remove = id => generator('remove', id);\n\n/**\n * 删除整个书签。\n */\nexport const removeTree = () => generator('removeTree');\n","import * as bookmark from './bookmark';\n\nexport const bookmarkApi = bookmark;\nexport default {\n  bookmark,\n};\n"],"sourceRoot":""}