webpackJsonp([1],{152:function(e,t,o){"use strict";var n,r=o(69),a=(n=r)&&n.__esModule?n:{default:n};var i,c={},s=[],m=a.default,u=m.title;function d(e){chrome.bookmarks.getChildren(e.id,function(e){s=e})}function f(){chrome.bookmarks.getChildren(c.id,function(e){var t;t=e?e.length:0,chrome.browserAction.setBadgeText({text:t>99?"+"+t:""+t})})}function l(e,t){chrome.notifications.create({iconUrl:"./icons/icon_128.png",type:"basic",title:e,message:t})}function h(){chrome.tabs.query({active:!0,currentWindow:!0},function(e){if(1!==e.length)throw"add post ERROR";var t=e[0];!function(e,t){var o={parentId:c.id,title:e,url:t},n=!0,r=!0,a=!1,i=void 0;try{for(var m,u=s[Symbol.iterator]();!(r=(m=u.next()).done);r=!0)m.value.url===t&&(n=!1)}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}if(!n)return l("warning","you has the same post."),!1;chrome.bookmarks.create(o,function(e){d(c),l("success","add a read later post.")})}(t.title,t.url),f()})}(i=u,new Promise(function(e,t){chrome.bookmarks.search({title:i},function(t){t.length?(function(e){var t=e[0].id;c=Object.assign({},e[0]),e.shift(),e.forEach(function(e){chrome.bookmarks.getChildren(e.id,function(o){o.forEach(function(e){chrome.bookmarks.move(e.id,{parentId:t})}),chrome.bookmarks.remove(e.id)})})}(t),e(c)):chrome.bookmarks.create({title:i},function(t){e(t)})})})).then(function(e){c=e,d(e),f()}),chrome.contextMenus.create({title:"read later",contexts:["page"],onclick:h}),chrome.runtime.onMessage.addListener(function(e){var t=e.type,o=e.data;!function(e,t){var o;"remove"===e&&(o=t,s.forEach(function(e,t){e.id===o&&s.splice(t,1)}),chrome.bookmarks.remove(o,function(){d(c),l("success","remove post.")})),"clear"===e&&(chrome.bookmarks.removeTree(c.id),chrome.runtime.reload(),c={},s=[]),"get_data"===e&&chrome.runtime.sendMessage({type:"return_data",data:c}),"get_folderName"===e&&chrome.runtime.sendMessage({type:"return_folderName",data:u}),"get_settings"===e&&chrome.runtime.sendMessage({type:"return_settings",data:m}),"reset_settings"!==e&&"save_settings"!==e||function(e,t){u="reset_settings"===e?a.default.title:t,chrome.bookmarks.update(c.id,{title:u},function(){m.title=u,console.log(m)})}(e,t),f()}(t,o)}),chrome.commands.onCommand.addListener(function(e){"add-new-post"===e&&h()})}},[152]);