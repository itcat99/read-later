!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=62)}({25:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"__read_later__",favicon_api:"http://www.google.com/s2/favicons?domain=",img_timeout:3e3,img_default:"./icons/icon_48.png"}},61:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return new Promise(function(t,o){var r;(r=chrome.bookmarks)[e].apply(r,n.concat([function(n){"remove"!==e&&"removeTree"!==e||t(),n?t(n):o(n)}]))})}},62:function(e,t,n){"use strict";var o=i(n(25)),r=i(n(61));function i(e){return e&&e.__esModule?e:{default:e}}var c={},u=[],a=o.default,s=a.title;function f(e,t){chrome.notifications.create({iconUrl:"./icons/icon_128.png",type:"basic",title:e,message:t})}function d(){return c.id?(0,r.default)("getChildren",c.id).then(function(e){var t=e?e.length:0;chrome.browserAction.setBadgeText({text:t>99?"+"+t:""+t})}):(chrome.browserAction.setBadgeText({text:"0"}),!1)}function l(){(0,r.default)("getChildren",c.id).then(function(e){u=e,d()})}function h(){chrome.tabs.query({active:!0,currentWindow:!0},function(e){if(1!==e.length)throw new Error("add post ERROR");var t=e[0];!function(e,t){var n={parentId:c.id,title:e,url:t},o=!0;u.forEach(function(e){e.url===t&&(o=!1)}),o?(0,r.default)("create",n).then(function(){l(),f("success","add a read later post.")}):f("warning","you has the same post.")}(t.title,t.url),d()})}function p(e){return new Promise(function(t,n){(0,r.default)("search",{title:e}).then(function(n){n.length?(!function(e){var t=e[0].id;c=Object.assign({},e[0]),e.shift(),e.forEach(function(e){(0,r.default)("getChildren",e.id).then(function(e){e.forEach(function(e){(0,r.default)("move",e.id,{parentId:t})})}).then(function(){return(0,r.default)("remove",e.id)})})}(n),t(c)):(0,r.default)("create",{title:e}).then(function(e){t(e)})}).catch(function(e){n(e)})})}function m(e,t){var n;"remove"===e&&(n=t,u.forEach(function(e,t){e.id===n&&u.splice(t,1)}),(0,r.default)("remove",n).then(function(){l(),f("success","remove post.")})),"clear"===e&&(0,r.default)("removeTree",c.id).then(function(){return p(s)}).then(function(e){c=e,l(),d()}),"get_data"===e&&chrome.runtime.sendMessage({type:"return_data",data:c}),"get_settings"===e&&chrome.runtime.sendMessage({type:"return_settings",data:a}),"reset_settings"!==e&&"save_settings"!==e||function(e,t){var n=void 0;t&&t.title!==s&&(n=!0),a="reset_settings"===e?o.default:t,n&&(s=a.title,(0,r.default)("update",c.id,{title:s}))}(e,t)}chrome.browserAction.setPopup({popup:"./popup.html"}),p(s).then(function(e){c=e,l(),d()}),chrome.browserAction.setBadgeBackgroundColor({color:"#4779ED"}),chrome.contextMenus.create({title:"read later",contexts:["page"],onclick:h}),chrome.runtime.onMessage.addListener(function(e){m(e.type,e.data)}),chrome.commands.onCommand.addListener(function(e){"add-new-post"===e&&h()})}});