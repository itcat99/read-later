webpackJsonp([1],{3:function(e,t,o){"use strict";var r,n=o(0),a=(r=n)&&r.__esModule?r:{default:r};var i={},c=[];function s(e){chrome.bookmarks.getChildren(e.id,function(e){c=e})}function u(){chrome.bookmarks.getChildren(i.id,function(e){var t;t=e?e.length:0,chrome.browserAction.setBadgeText({text:99<t?"+"+t:""+t})})}function m(e,t){chrome.notifications.create({iconUrl:"./icons/icon_128.png",type:"basic",title:e,message:t})}function d(){chrome.tabs.query({active:!0,currentWindow:!0},function(e){if(1!==e.length)throw"add post ERROR";var t=e[0];(function(e,t){var o={parentId:i.id,title:e,url:t},r=!0,n=!0,a=!1,u=void 0;try{for(var d,l=c[Symbol.iterator]();!(n=(d=l.next()).done);n=!0)d.value.url===t&&(r=!1)}catch(e){a=!0,u=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw u}}r?chrome.bookmarks.create(o,function(){s(i),m("success","add a read later post.")}):m("warning","you has the same post.")})(t.title,t.url),u()})}new Promise(function(e){chrome.bookmarks.search({title:a.default.title},function(t){t.length?(function(e){var t=e[0].id;i=Object.assign({},e[0]),e.shift(),e.forEach(function(e){chrome.bookmarks.getChildren(e.id,function(o){o.forEach(function(e){chrome.bookmarks.move(e.id,{parentId:t})}),chrome.bookmarks.remove(e.id)})})}(t),e(i)):chrome.bookmarks.create({title:a.default.title},function(t){e(t)})})}).then(function(e){i=e,s(e),u()}),chrome.contextMenus.create({title:"read later",contexts:["page"],onclick:d}),chrome.runtime.onMessage.addListener(function(e){var t=e.type,o=e.data;!function(e,t){"remove"===e&&function(e){var t=!0,o=!1,r=void 0;try{for(var n,a,u=Object.keys(c)[Symbol.iterator]();!(t=(n=u.next()).done);t=!0)a=n.value,c[a].id===e&&c.splice(a,1)}catch(e){o=!0,r=e}finally{try{!t&&u.return&&u.return()}finally{if(o)throw r}}chrome.bookmarks.remove(e,function(){s(i),m("success","remove post.")})}(t),"clear"===e&&(chrome.bookmarks.removeTree(i.id),chrome.runtime.reload(),i={},c=[]),"get_data"===e&&chrome.runtime.sendMessage({type:"return_data",data:i}),u()}(t,o)}),chrome.commands.onCommand.addListener(function(e){"add-new-post"===e&&d()})}},[3]);